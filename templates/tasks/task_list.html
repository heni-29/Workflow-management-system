{% extends "base.html" %}
{% block content %}
<div class="sm:flex sm:items-center mb-8">
  <div class="sm:flex-auto">
    <h1 class="text-3xl font-bold text-gray-900">Tasks</h1>
    <p class="mt-2 text-sm text-gray-700">A list of all tasks including their title, project, status, and assignee.</p>
  </div>
  <div class="mt-4 sm:mt-0 sm:ml-16 sm:flex-none">
    <a href="{% url 'task_create' %}"
      class="inline-flex items-center justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:w-auto transition">
      Create Task
    </a>
  </div>
</div>

<div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
  <table class="min-w-full divide-y divide-gray-300">
    <thead class="bg-gray-50">
      <tr>
        <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6">Title</th>
        <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Project</th>
        <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Status</th>
        <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Assignee</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-200 bg-white">
      {% for t in tasks %}
      <tr class="hover:bg-gray-50 transition-colors">
        <td class="whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6">{{ t.title }}</td>
        <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">{{ t.project.name }}</td>
        <td class="whitespace-nowrap px-3 py-4 text-sm">
          {% if t.status == 'todo' %}
          <span class="inline-flex rounded-full bg-gray-100 px-2 text-xs font-semibold leading-5 text-gray-800">To
            Do</span>
          {% elif t.status == 'in_progress' %}
          <span class="inline-flex rounded-full bg-blue-100 px-2 text-xs font-semibold leading-5 text-blue-800">In
            Progress</span>
          {% elif t.status == 'review' %}
          <span
            class="inline-flex rounded-full bg-yellow-100 px-2 text-xs font-semibold leading-5 text-yellow-800">Review</span>
          {% elif t.status == 'done' %}
          <span
            class="inline-flex rounded-full bg-green-100 px-2 text-xs font-semibold leading-5 text-green-800">Done</span>
          {% else %}
          <span class="inline-flex rounded-full bg-gray-100 px-2 text-xs font-semibold leading-5 text-gray-800">{{
            t.get_status_display }}</span>
          {% endif %}
        </td>
        <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">
          {% if t.assignee %}
          <div class="flex items-center">
            <div
              class="h-6 w-6 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 text-xs font-bold mr-2">
              {{ t.assignee.username|make_list|first|upper }}
            </div>
            {{ t.assignee.username }}
          </div>
          {% else %}
          <span class="text-gray-400 italic">Unassigned</span>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="4" class="px-6 py-12 text-center text-sm text-gray-500">
          No tasks found. Get started by creating a new task.
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}